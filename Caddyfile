:80 {
    encode gzip

    # 处理前端 SPA 路由：所有路径都返回 index.html
    handle {
        try_files {path} {path}/ /index.html
        root * /usr/share/caddy
        file_server
    }

    # API 请求转发到本地 Python 后端
    handle /api/* {
        uri strip_prefix /api
        reverse_proxy http://localhost:8000
    }

    # 健康检查接口，代理到 Python 服务
    handle /healthz {
        reverse_proxy http://localhost:8000
    }
}